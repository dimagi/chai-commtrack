<?xml version="1.0"?>
<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa">
  <h:head>
    <h:title>entries</h:title>
    <model>
      <instance>
        <data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/10f3335edc995a263bccc99bd02967835d7cc4d8" uiVersion="1" version="1" name="entries">
          <entries_new/>
          <validity/>
          <entries_old/>
          <entries_current/>
          <inventory_prev/>
          <exits/>
          <adjustments/>
          <soh_calc/>

            <!-- CommTrack -->
            <transfer xmlns="http://commcarehq.org/ledger/v1" dest="" type="stock-card-entry" date="" section-id="stock">
                    <entry id="" quantity=""/>
            </transfer>
            <!-- /CommTrack -->

        </data>
      </instance>

        <!-- CommTrack -->
        <bind nodeset="/data/transfer/@date" calculate="/data/meta/timeEnd"/>
        <bind nodeset="/data/transfer/@dest" calculate="instance('commcaresession')/session/data/case_id_case_supply-point"/>
        <bind nodeset="/data/transfer/entry/@id" calculate="instance('commcaresession')/session/data/product_id"/>
        <bind nodeset="/data/transfer/entry/@quantity" calculate="/data/entries_new"/>
        <!-- /CommTrack -->

      <bind nodeset="/data/entries_new" type="xsd:int" required="true()"/>
      <bind nodeset="/data/validity" type="xsd:date"/>
      <bind nodeset="/data/entries_old"/>
      <bind nodeset="/data/entries_current" calculate="int(/data/entries_old) + int(/data/entries_new)"/>
      <bind nodeset="/data/inventory_prev"/>
      <bind nodeset="/data/exits"/>
      <bind nodeset="/data/adjustments"/>
      <bind nodeset="/data/soh_calc" calculate="int(/data/inventory_prev) + int(/data/entries_current) - int(/data/exits) - int(/data/adjustments)"/>
      <itext>
        <translation lang="en" default="">
          <text id="entries_new-label">
            <value>Entries</value>
          </text>
          <text id="validity-label">
            <value>Validity</value>
          </text>
        </translation>
      </itext>
    </model>
  </h:head>
  <h:body>
    <input ref="/data/entries_new">
      <label ref="jr:itext('entries_new-label')"/>
    </input>
    <input ref="/data/validity">
      <label ref="jr:itext('validity-label')"/>
    </input>
  </h:body>
</h:html>
